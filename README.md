# 그로잉 ( Growing )

개발 환경: localhost:8080, MySQL Docker Container

```sh
cd docker
docker compose -p follower up -d
```

## 요구사항 정리 

---

### 권한

1. 특정 부서를 관리하는 관리자 계정의 id와 pw를 개발자가 만들어준다.
2. 관리자는 관리자 페이지에서 추가적인 관리자 계정과 유저 계정을 생성할 수 있다.
3. 계정에 할당된 롤은 총 4개가 존재한다.
    1. 관리자 (목사, 간사 등): 팀(LBS, GBS) 생성, 부서 정보 변경, 시즌 변경, 출석율 확인, 기타 등등
    2. 매니저 (목사, 간사 등): 기도 작성, 출석, 기도 삭제, 기타 등등
    3. 리더(코디, 리더 등): 기도 작성, 조원 출석 관리
    4. 조원: 기도 작성
4. 관리자와 매니저는 사실상 동일 인물일 것이라고 판단된다. 다만, 관리자 페이지와 앱을 구분하기 위한 용도다.
5. 관리자는 관리자 페이지만 접속 가능, 나머지는 앱만 접속 가능하다.
6. 관리자가 부서를 떠났을 때 계정을 정지하는 등 더 이상 관리자 페이지에 접속 못하도록 한다.

---

### 내 정보

1. 관리자 페이지와 앱에서 이 정보를 관리할수 있도록 한다.
   - 관리자가 처음에 입력하는 값들: 로그인id, 로그인pw, 이름, 생년월일, 빠른 여부, 성별
   - 유저가 수정할수 있는 값들: 로그인id(중복 검증), 로그인pw

2. 이름
   - 기도 제목 등 앱에서 특정 유저를 식별하는 용도로 사용한다.
   - 실명제로 하고 동명이인은 부서의 이름 관리 정책에 따른다. 예) 이종민B

3. 생년월일
    - 일단, 청년부와 대학부 2개 케이스만 간주한다.
        - 청년부는 또래로 표기 ( 91또래 )
        - 대학부는 학년으로 표기 ( 8학년 )
        - 빠른 여부에 따라 학년과 또래가 달라질 수 있다.
            - 예 ) 97년 1월 → 8학년, 97년 4월 → 7학년
4. 이름, 생년월일, 빠른 여부, 성별 등을 모두 종합하여 앱에서 표시한다. 예) 남8 우상욱, 남91 이종민

---

### 부서

1. 부서와 부서를 관리하는 최초의 관리자 계정은 개발자만 생성할 수 있다.
2. 필요한 정보
    1. 부서 이름(필수) 예) 대학 8부
    2. 부서 위치(필수) 예) S802호
    3. 부서 교역자 이름(필수) 예) 이순종 목사
    4. 부서 교역자 전화 번호(필수) 예) 010-1234-1234
    5. 교회 이름(선택?) 예) 사랑의 교회
    6. 교회 사이트(선택?) 예) 사랑의 교회 사이트
    7. 부서 SNS(선택) 예) Youtube, instagram 등
    8. 로고 (추후에 개발)
3. 관리자가 생성하는 유저는 모두 부서 소속이 된다.

---

### 시즌

1. 관리자가 시즌을 변경 중이면 공지와 함께 앱 사용을 중지한다. 예) 2022-2학기 → 2023-1학기
2. 특정 시점의 활성화된 시즌은 무조건 한 개 이하다.
    1. 이전 시즌의 기록은 삭제하지 않는다. 다만, 비활성화 될 뿐이다.
3. 시즌 정보 설정 시 유저는 이름으로 검색한다(prefix-matching). 간사↔리더↔조원 간 상호 변경될 수 있기 때문에 모든 유저를 검색할 수 있어야 한다.
4. 시즌 변경 및 팀 배정은 노가다가 매우 심한 작업이기 때문에 중간 저장이 가능해야 한다.
5. 시즌을 활성화하면 유저들의 롤은 활성화된 시즌의 롤로 일괄 변경된다.
6. 시즌 롤 배정 시 검증을 통해 이상 현상을 막는다.
    1. 한 유저는 한 개의 롤만 배정 받는다. ex) 리더인 동시에 조원일 수 없다.
7. 시즌 팀 배정 시 검증을 통해 이상 현상을 막는다.
    1. 한 유저는 여러 팀에 들어갈수 있다. ex) 리더는 LBS, GBS 동시 소속이 될 수 있다.
    2. 한 유저는 리더가 한번만 될수 있다. (한 유저가 여러 팀을 관리하게 되는 경우는 없을까?)
    3. 한 사람은 조원이 한번만 될수 있다. (한 유저가 여러 팀에 조원으로 소속되는 경우는 없을까?).
8. 필요한 정보
    1. 시즌 이름 예) 2022 - 2학기
    2. 기간 (기록상으로 필요함. 실제 활성화/비활성화와는 상관 없음)

---

### 팀

1. 팀은 GBS, LBS와 같이 시즌에서 가장 중요한 대표 모임이다.
2. 팀은 시즌에 종속된다. 시즌이 비활성화되면 자연스럽게 종속된 팀들도 일괄적으로 비활성화 된다.
    1. 비활성화 될 뿐, 기록 자체는 남겨야한다.
3. 필요한 정보
    1. 소속 시즌 예) 2022-2학기
    2. 팀 이름 예) 간사 모임, 이종민 LBS, 우상욱 GBS
    3. 리더
        - 소속 시즌의 매니저 혹은 리더 롤을 부여 받은 사람만 배정할 수 있다.
    4. 조원들
        - 누구든지 배정할수 있다.
4. 리더는 팀의 출석 정보를 관리한다.

---

### 출석 관리

1. 일요일 00:00 부터 토요일 23:59까지 1주일 기간을 준다.
    1. 특정 시간에 출석 정보를 관리하면 가장 최근(이번 주) 일요일의 출석 정보로 간주한다.
2. 일요일 00:00이 지나서 새로운 주가 되면 지난 주 일요일에 설정된 출석 정보를 최종으로 간주한다.
3. 앱에서는 저번 주 일요일의 출석 정보를 수정할 수 없다.
    1. 1주일이나 시간을 줬는데 안 하면 빠따 맞고 관리자한테 부탁해서 관리자 페이지를 통해 수정한다.
4. 필요한 정보
    1. 날짜 (필수)
    2. 출석, 결석, 지각 (필수)
    3. 비고 (선택)
5. 관리자 페이지에서 다양한 출석율 통계를 볼 수 있다. (시즌 출석율, 개인 출석율, GBS 출석율 등등)

---

### 기도 

1. 작성 내용
   - 본문
   - 공개 범위
   - 생성+수정 날짜(자동 입력)
2. (고민) 공개 범위
   - 전체, 팀(GBS), 사역팀, 목사님, 특정인 지정 등등..
3. (고민) 기도를 시즌(팀)에 종속해서 갈 것인지, 독립적으로 갈 것인지 고민해보자.
4. 관리자, 매니저는 각각 관리자 페이지와 앱에서 기도를 감출 수 있다.
    - 적절하지 못한 기도가 올라올 수 있기 때문이다. (또라이가 욕 갈기면 어떡해..)
    - 수정, 삭제는 불가
5. 유저 본인의 기도는 언제든 생성, 수정, 삭제 가능하다.
6. (고민) 댓글(+대댓글)
    - 정말 필요한가?
    - 소외감을 느끼는 인원이 생기지 않을까?
    - 관종(..)이 생기지 않을까?
7. (고민) 팔로잉(+푸쉬알림)
    - 정말 필요한가?
    - 소외감을 느끼는 인원이 생기지 않을까?
    - 기도 쏠림 현상이 일어나지 않을까?
8. (고민) 전체 보기는 부서 인원이 너무 많기 때문에 사실상 무의미하다. (사실상 지금 하고 있는 pdf 방식)
    - 대체 후보: 오늘의 기도(ex. 순서대로 매일 20명씩 보여주기), 오늘의 LBS 등등..
    - GBS/LBS 기도 제목 모아보기
9. (고민) 긴급 기도, 일반 기도 구분
    - 긴급 기도만 따로 모아볼 수 있는건 좋은 것 같다!

---

### 논의할 것

- 부서를 사실상 교회로 볼 수 있지 않은가?
    - 대형 교회의 경우 대학부, 청년부의 부서 하나를 하나의 교회로 생각해도 무방한듯 싶다.
    - 굳이 부서를 나눌 필요가 없는 작은 교회의 경우 하나의 부서를 만들어서 교회로 생각해도 될듯?
- 시즌 정보 설정할 때 롤 배정과 팀 배정을 구분하면 편할 듯 싶은데?
- 리더 모임을 팀이 아니라 따로 사역팀으로 빼야할까?
    - 시즌마다 바뀌면서 시즌의 핵심 모임이라는 점에서 리더 모임도 팀으로 취급하는게 더 자연스러워 보인다.
- 기도 요구사항 정리가 필요하다. 핵심 기능이기 때문에 신중하게 정리해보자.
    - 기도 요구사항을 고민하다 보니 사역팀을 베타 기능에 넣는게 낫지 않을까 라는 생각이듬.
        - 사역팀원끼리 집중적으로 서로 기도하는 경우가 많을 것 같기 때문에
    - 공개 범위
        - 예) 전체 공개, 팀(GBS/LBS), 사역팀(제자반, 찬양팀 등), 교역자에게만
        - 특정인 지정(중보 기도 요청)까지 생각했지만 인스타DM 느낌이 나서 조심스럽다.
        - 개인정보법(?!). 1대1 기도 요청은 보류.
    - 기도가 시즌에 종속되어야하나?
        - 굳이 그럴 필요 없이 독립적으로 취급해도 괜찮을 것 같다는 생각이 듬.
        - 단, 시즌이 바뀌면 팀이 비활성화 되기 때문에 팀한테만 공개한 기도를 어떻게 처리해야할지 고민임.
            - 그냥 감춰버리는 쉬운 방법이 있긴 함. (팀 공개 기도만 시즌에 종속시키는 것)
    - 댓글(+대댓글)
        - 정말 필요한가?
        - 소외감을 느끼는 인원이 생기지 않을까?
        - 관종(..)이 생기지 않을까?
    - 특정 사람의 기도만 보고 싶을 수 있다. 당장 생각나는 기능은 아래와 같음.
        - 팔로잉(+푸쉬알림)
            - 소외감을 느끼는 인원이 생기지 않을까?
            - 기도 쏠림 현상이 일어나지 않을까?
        - 이름 검색
            - 검색→기도→검색→기도
                - 사용성 떨어짐. 기도 시간이 산만해질 위험.
            - 대안은 팔로잉인데 위에 언급한 부분들이 조심스럽다.
    - 전체 보기는 부서 인원이 너무 많기 때문에 사실상 무의미하다. (사실상 지금 하고 있는 pdf 방식)
        - 대체 후보: 오늘의 기도(ex. 순서대로 매일 20명씩 보여주기), 오늘의 LBS 등등..
        - GBS/LBS 기도 제목 모아보기는 필요할 것 같다.
            - 코디들이 LBS 소속인원들을 위해 기도하는 경우를 많이 목격함.
            - 리더들이 GBS 소속인원들을 위해 기도하는 경우를 많이 목격함. (솔직히 안하는 리더들은 곤장좀 쳐야함.)
            - LBS/GBS 간 유대감 촉진
    - 긴급 기도 구분

---

### 나중에 고민할 것

- 사역팀
- 공지사항 전달
- 양육일기
- 마케팅
  - 오픈 카카오톡: 버그 및 오류, 개선 의견 듣는 창구 만들기
  - 의견을 받아서 애정을 갖도록 한다.
  - 연애 정보는 추후에 필살기로 한다.
